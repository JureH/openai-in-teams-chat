{"$schema":"https://dataexplorer.azure.com/static/d/schema/36/dashboard.json","id":"fcdda242-68c5-4fa1-ae7a-46d044c446ac","eTag":"h4yOmyiWdgcnbKSeouTpQw==","title":"OpenAI","tiles":[{"id":"706c97f4-9909-45b9-b2bd-5ef18bef5eac","title":"OpenAIQnA","visualType":"table","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":0,"y":4,"width":24,"height":11},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| mv-expand Question=Body.content, Answer=HttpBody.choices[0].message.content, HttpBody.created\n| project QuestionTime=CreatedDateTime, Question=replace(@'\\</?\\w+\\>', '',tostring(Question)), Answer, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| sort by QuestionTime desc \n\n//max(ms) = slowest response? -done\n//max/min Addressed to? -done\n//maxmin tokens?\n//most common question?\n//most common answer?\n//hallucinations OpenAIQnA| where HttpBody has 'interpolation'| take 10"},"visualOptions":{"hideLegend":false,"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}},{"id":"65f4355e-7035-4030-bd0b-1acaa3a32234","title":"Top keyword","visualType":"multistat","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":10,"y":0,"width":14,"height":4},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| mv-expand Question=Body.content, Answer=HttpBody.choices[0].message.content, HttpBody.created\n| project QuestionTime=CreatedDateTime, Question=replace(@'\\</?\\w+\\>', '',tostring(Question)), Answer, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| where Question has_any ('openai', 'copilot','genie', 'chatgpt')\n| extend To=case(\n    Question has 'openai', \"openai\",\n    Question has 'copilot', 'copilot',\n    Question has 'genie', 'genie',\n    Question has 'chatgpt', 'chatgpt', '')\n| summarize count() by To\n| sort by count_ desc \n"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorStyle":"light","multiStat__displayOrientation":"vertical","multiStat__labelColumn":{"type":"infer"},"multiStat__slot":{"width":4,"height":1},"colorRules":[]}},{"id":"036e87af-3bcc-421c-a15e-8bfc63d04f8d","title":"Avg Speed (ms)","visualType":"card","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":0,"y":0,"width":10,"height":4},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| mv-expand Question=Body.content, Answer=HttpBody.choices[0].message.content, HttpBody.created\n| project QuestionTime=CreatedDateTime, Question=replace(@'\\</?\\w+\\>', '',tostring(Question)), Answer, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| summarize avg=round(avg(ms),2)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[{"id":"f55a4995-12cd-493e-82d7-0fa9f690c830","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">","column":null,"values":["10000"]}],"chainingOperator":"and","visualType":"stat","colorStyle":"bold","color":"yellow","tag":"Review","icon":"warning","ruleName":""},{"id":"eda07e62-de09-4928-bfb7-956c1cae5bec","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":"<","column":null,"values":["10000"]}],"chainingOperator":"and","visualType":"stat","colorStyle":"bold","color":"green","tag":"Fast","icon":"completed","ruleName":""}]}},{"id":"8ec11f29-7d4e-47dc-976a-c336fa669bc8","title":"Speed","visualType":"timechart","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":0,"y":15,"width":17,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| where CreatedDateTime < ago(24h)\n| mv-expand HttpBody.created\n| project QuestionTime=CreatedDateTime, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| project ms=ms/1000, AnswerTime\n| order by AnswerTime\n| render timechart  "},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"ms","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"AnswerTime","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"c15d4a8c-39b0-4e1e-873a-acf50a9895c7","title":"Anomalies","visualType":"anomalychart","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":0,"y":22,"width":17,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| where CreatedDateTime < ago(24h)\n| mv-expand HttpBody.created\n| project QuestionTime=CreatedDateTime, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| project s=ms/1000, AnswerTime\n| order by AnswerTime\n| make-series avg(s) on AnswerTime step 1m\n// | extend avg_s=series_fill_linear(avg_s)\n| extend ad=series_decompose_anomalies(avg_s,5)\n| render anomalychart "},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"ms","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"AnswerTime","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"c640e937-8ec3-482e-83af-8570bab99613","title":"Anomalies","visualType":"table","pageId":"7ad963a5-f471-42ac-97d3-f496144e2148","layout":{"x":17,"y":15,"width":7,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"b2816dfb-e7f4-44b0-b819-614b5e497917"},"usedVariables":[],"text":"OpenAIQnA\n| where CreatedDateTime < ago(24h)\n| mv-expand HttpBody.created\n| project QuestionTime=CreatedDateTime, AnswerTime=unixtime_seconds_todatetime(toint(HttpBody.created))\n| extend ms=datetime_diff('millisecond',AnswerTime, QuestionTime)\n| project s=ms/1000, AnswerTime\n| order by AnswerTime\n| make-series avg(s) on AnswerTime step 1m\n// | extend avg_s=series_fill_linear(avg_s)\n| extend (score, baseline, anomaly) =series_decompose_anomalies(avg_s,5)\n| mv-expand avg_s, AnswerTime, anomaly, baseline, score\n| where score<>0\n| order by todatetime(AnswerTime) desc\n| project round(todecimal(avg_s),2), todatetime(AnswerTime)"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}}],"dataSources":[{"id":"b2816dfb-e7f4-44b0-b819-614b5e497917","name":"MyDatabase","clusterUri":"https://kvc43f0ee6600e24ef2b0e.southcentralus.kusto.windows.net/","database":"MyDatabase","kind":"manual-kusto","scopeId":"kusto"}],"schema_version":"36","autoRefresh":{"defaultInterval":"5m","enabled":true},"sharedQueries":[],"parameters":[{"kind":"duration","id":"a5c9a506-0a98-41c4-9af8-5d14fa51f4b0","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"pages":[{"name":"Page 1","id":"7ad963a5-f471-42ac-97d3-f496144e2148"}]}